# Cocos Creator KOF 工作流開發日誌
**日期**: 2026-01-18
**專案**: Zelta-Cocos (薩爾達風格 RPG)
**工作流**: KeepOnFirst (Antigravity 協調 + Jules 編碼 + Nano Banana 素材)

## 📅 流程概覽
我們執行了完整的「App Factory」風格工作流，嚴格按照階段進行：
1.  **第一階段 (規劃)**：定義規格、架構 (Entity-Component) 和資料結構。
2.  **第二至三階段 (核心實體)**：純代碼 (`.ts` 檔案) 實作玩家與敵人系統。
3.  **第四至五階段 (世界與道具)**：生成素材 (Tilesets, Icons) 並整合邏輯 (房間管理, 背包系統)。
4.  **第六至七階段 (系統)**：加入存檔讀取、音效系統與 HUD 介面。

## ✅ 成功之處
-   **開發效率**：在不開啟編輯器的情況下，快速生成了大量的基礎架構與邏輯代碼 (Managers, Components, Systems)。
-   **架構設計**：`Entity-Component` (實體-組件) 模式清楚地分離了邏輯與引擎細節，讓 Jules 能寫出易於測試的代碼。
-   **素材生成**：Nano Banana 高效地提供了佔位與最終版像素藝術素材，並完美符合專案目錄結構。

## 🛑 嚴重問題
-   **「沒有場景」的阻礙**：
    -   **問題**：完成第七階段 (Polish) 後，我們嘗試用 Cocos Creator 打開專案。
    -   **觀察**：**專案是空的。** 沒有任何 `.scene` 檔案可以打開。我們有大量的腳本和素材，但沒有「Level 1」可以按播放鍵來測試。
    -   **原因**：計畫過度優化「代碼優先 (Code-First)」，忽略了遊戲引擎 (Unity/Cocos) 需要「場景資產 (Scene Asset)」作為入口的特定需求。我們假設組件會「直接運作」，但它們實際需要掛載到場景中的節點 (Nodes) 上。
    -   **解決成本**：我們必須緊急增加 **第八階段 (場景設置)** 來透過程式生成一個啟動場景。

## 💡 學到的教訓
1.  **引擎入口點是首要任務**：未來的遊戲引擎 KOF 計畫 **必須** 在第 0 或第 1 階段包含「建立主場景 (Main Scene)」。
2.  **代碼與編輯器的平衡**：我們不能 100% 依賴純代碼。我們需要一個「Bootstrap」腳本在執行時實例化實體，以橋接代碼邏輯與場景圖 (Scene Graph) 之間的鴻溝。
3.  **早期驗證**：「審查」階段應該更早包含「在編輯器中打開」的步驟，而不僅僅是「閱讀代碼」。

## 🔧 已實施的解決方案
-   建立了 **第八階段**：生成一個極簡的 `Main.scene` JSON 檔案和 `GameBootstrap.ts` 腳本。
-   此腳本充當「上帝物件 (God Object)」，在執行時初始化 `InputSystem`、`AudioSystem`，並生成 `Player` 和 `UI` 預製物件，繞過需要在編輯器中手動拖放數百個組件的需求。
